!function(s){var t={};function e(i){if(t[i])return t[i].exports;var h=t[i]={i:i,l:!1,exports:{}};return s[i].call(h.exports,h,h.exports,e),h.l=!0,h.exports}e.m=s,e.c=t,e.d=function(s,t,i){e.o(s,t)||Object.defineProperty(s,t,{enumerable:!0,get:i})},e.r=function(s){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},e.t=function(s,t){if(1&t&&(s=e(s)),8&t)return s;if(4&t&&"object"==typeof s&&s&&s.__esModule)return s;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:s}),2&t&&"string"!=typeof s)for(var h in s)e.d(i,h,function(t){return s[t]}.bind(null,h));return i},e.n=function(s){var t=s&&s.__esModule?function(){return s.default}:function(){return s};return e.d(t,"a",t),t},e.o=function(s,t){return Object.prototype.hasOwnProperty.call(s,t)},e.p="",e(e.s=1)}([function(s,t){s.exports=class{constructor(s,t){this.game=s,this.husky=t,this.frame=0,this.width=32,this.height=32,this.xPos=290,this.yPos=129,this.velX=-.5,this.velY=0,this.sprites=new Image,this.bound=!1,this.stunCount=0,this.deathSound=new Audio("./assets/audio/retro_die_02.ogg")}die(){this.dead=!0,this.velY=0,this.frame=0,this.sprites.src="./assets/images/explosion.png",this.enemyAnimation={width:32,height:32,delay:10,y:0,x:[0,32,64,96,128,160]},this.game.addScore(5),this.game.playSound(this.deathSound),setTimeout(()=>{this.game.delEnemy(this)},500)}move(){this.dead?this.xPos-=this.husky.speed:this.bound?this.xPos+=this.velX:(this.yPos<129&&(this.velY+=.3),this.velX>-.5&&(0===this.stunCount||this.dead)&&(this.velX-=.5),this.xPos+=this.velX-this.husky.speed),this.yPos+=this.velY,this.yPos>=129&&(this.yPos=129,this.velY>6?this.dead||this.die():this.velY=0)}tick(s){this.stunCount>0&&(this.stunCount-=1),this.move(),this.draw(s),this.xPos<-30&&this.game.delEnemy(this),this.frame=this.frame+1}draw(s){let t=Math.floor(this.frame/this.enemyAnimation.delay);0===this.stunCount&&t===this.enemyAnimation.x.length&&(this.frame=0,t=0);let e=this.enemyAnimation.x[t||0];s.drawImage(this.sprites,e,this.enemyAnimation.y,this.enemyAnimation.width,this.enemyAnimation.height,this.xPos-this.width/2,this.yPos-this.height/1.5,this.width,this.height)}}},function(s,t,e){const i=e(2);document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("game-canvas");new i(s)})},function(s,t,e){const i=e(3),h=e(4),n=e(5),a=e(6),o=e(7);s.exports=class{constructor(s){this.canvas=s,this.ctx=s.getContext("2d"),this.height=s.height,this.width=s.width,this.audio=new Audio("./assets/audio/Radio Etalia.mp3"),this.audio.loop=!0,this.paused=!0,this.muted=!1,this.audio.currentTime=0,this.hiScore=0,this.restart(),document.addEventListener("keydown",this.pressKey.bind(this)),this.drawOpening()}drawOpening(){this.ctx.clearRect(0,0,750,500),this.background.draw(this.ctx),this.husky.draw(this.ctx),this.ctx.strokeText("Press enter to play",this.width/2-45,50),this.paused&&requestAnimationFrame(this.drawOpening.bind(this))}addScore(s){this.score+=s,this.husky.hp<3&&this.score%100==0&&(this.husky.hp+=1)}addEnemy(){const s=Math.ceil(this.score/10)||1;if(this.enemies.length<s){const s=Math.random()>.4?new a(this,this.husky):new n(this,this.husky);this.enemies.push(s)}}delEnemy(s){const t=this.enemies.indexOf(s);this.enemies.splice(t,1)}tick(){if(this.ctx.clearRect(0,0,750,500),this.paused)this.background.draw(this.ctx),this.husky.draw(this.ctx),this.enemies.forEach(s=>s.tick(this.ctx)),this.ctx.strokeText("Press enter to unpause",this.width/2-50,50);else{this.background.tick(this.ctx),this.husky.tick(this.ctx),this.light.tick(this.ctx),this.enemies.forEach(s=>s.tick(this.ctx));for(let s=0,t=this.enemies.length;s<t;s++){const t=this.enemies[s];if((Math.abs(t.velX)>6||Math.abs(t.velY)>6)&&(!t.bound||t.dead))for(let e=0,i=this.enemies.length;e<i;e++){const i=this.enemies[e];if(s!==e&&(!i.bound||i.dead)&&Math.abs(t.xPos-i.xPos)<13&&Math.abs(t.yPos-i.yPos)<13){t.die(),i.die();break}}}}this.ctx.strokeText(`Score: ${this.score}`,140,16),this.ctx.strokeText(`High Score: ${this.hiScore}`,210,16),this.paused||requestAnimationFrame(this.tick.bind(this))}pressKey(s){s.preventDefault(),"Enter"===s.code?this.paused?this.play():this.pause():"KeyM"===s.code?(this.audio.muted=!this.audio.muted,this.muted=!this.muted):this.paused||(this.husky.pressKey(s.code),this.light.pressKey(s.code))}releaseKey(s){this.husky.releaseKey(s.code),this.light.releaseKey(s.code)}playSound(s){this.muted||s.play()}play(){this.paused=!1,this.audio.play(),document.addEventListener("keyup",this.releaseKey.bind(this)),this.enemySpawner=setInterval(()=>{this.addEnemy()},2e3),this.tick()}pause(){clearInterval(this.enemySpawner),this.paused=!0,this.audio.pause(),document.removeEventListener("keyup",this.releaseKey)}restart(){this.husky=new h(this),this.background=new i(this.husky),this.enemies=[new n(this,this.husky)],this.light=new o(this,this.husky),this.score>this.hiScore&&(this.hiScore=this.score),this.score=0}}},function(s,t){s.exports=class{constructor(s){this.bgClouds=new Image,this.bgClouds.src="./assets/images/bg_clouds.png",this.bgTrees1=new Image,this.bgTrees1.src="./assets/images/bg_trees_1.png",this.bgTrees2=new Image,this.bgTrees2.src="./assets/images/bg_trees_2.png",this.envAssets=new Image,this.envAssets.src="./assets/images/env_assets.png",this.xCloud=0,this.xTree1=0,this.xTree2=0,this.xGround=0,this.husky=s}draw(s){s.drawImage(this.bgClouds,this.xCloud,0),s.drawImage(this.bgClouds,this.xCloud-384,0),s.drawImage(this.bgClouds,this.xCloud+384,0),s.drawImage(this.bgTrees1,this.xTree1,0),s.drawImage(this.bgTrees1,this.xTree1+384,0),s.drawImage(this.bgTrees2,this.xTree2,0),s.drawImage(this.bgTrees2,this.xTree2+384,0);for(let t=0;t<15;t++)s.drawImage(this.envAssets,150,32,32,16,this.xGround+32*t,140,32,16);this.xCloud=this.xCloud>=384||this.xCloud<=-384?0:this.xCloud+.2-.25*this.husky.speed}tick(s){this.draw(s),this.xTree1=this.xTree1<=-384?0:this.xTree1-.5*this.husky.speed,this.xTree2=this.xTree2<=-384?0:this.xTree2-.75*this.husky.speed,this.xGround=this.xGround<=-100?0:this.xGround-this.husky.speed}}},function(s,t){const e={barking:{delay:15,y:0,x:[0,90,180,270]},walking:{delay:15,y:58,x:[0,90,180,270,360,450]},running:{delay:10,y:116,x:[0,90,180,270,360]},jumping:{delay:10,y:116,x:[0,90,180,270,360]},sitting:{delay:50,y:174,x:[0,90,180,270]},sit:{delay:10,y:232,x:[0,90,180]},stand:{delay:10,y:232,x:[180,90,0]},standing:{delay:50,y:290,x:[0,90,180,270]}};s.exports=class{constructor(s){this.game=s,this.action="standing",this.frame=0,this.width=48,this.height=32,this.xPos=30,this.yPos=129,this.speed=0,this.velX=0,this.velY=0,this.hp=3,this.energy=75,this.huskyPng=new Image,this.huskyPng.src="./assets/images/husky.png",this.heartPng=new Image,this.heartPng.src="./assets/images/heart.png",this.barkMP3=new Audio("./assets/audio/lubark.mp3"),this.whine=new Audio("./assets/audio/dogwhine.mp3"),this.heldKeys={a:!1,d:!1}}pressKey(s){this.heldKeys[s]=!0,"Space"===s?(this.energy+="sitting"===this.action?5:1,this.energy>100&&(this.energy=100)):"KeyW"===s&&"sitting"===this.action?(this.frame=0,this.action="stand"):"KeyA"===s&&"standing"===this.action&&this.energy>=3?(this.frame=0,this.action="barking",this.barkMP3.currentTime=0,setTimeout(()=>{this.game.playSound(this.barkMP3),this.game.enemies.forEach(s=>{s.velX+=15})},400),this.energy-=3):"KeyW"===s&&"running"===this.action&&this.energy>=5&&129===this.yPos?(this.frame=0,this.action="jumping",this.velY=-5,this.energy-=5):"KeyS"===s&&"standing"===this.action&&(this.velX=0,this.frame=0,this.action="sit")}releaseKey(s){this.heldKeys[s]=!1}checkCollision(){const s=this.game.enemies;for(let t=0,e=s.length;t<e;t++){const e=s[t];if(Math.abs(this.xPos-e.xPos)<20&&Math.abs(this.yPos-e.yPos)<13){e.bound||e.dead||(this.hp-=1,this.game.playSound(this.whine),e.die(),0===this.hp&&this.game.restart());break}}}move(){this.heldKeys.KeyD&&this.velX<20?this.velX+=1:this.velX>0&&(this.velX-=1),this.heldKeys.KeyW&&"jumping"===this.action&&this.energy>0&&(this.velY-=.15,this.energy-=.02),this.yPos<129&&(this.velY+=.3),this.yPos+=this.velY,this.yPos>=129&&(this.yPos=129,this.velY=0)}draw(s){const t=e[this.action];let i=Math.floor(this.frame/t.delay);if(i===t.x.length){this.frame=0,i=0;const s={sit:"sitting",stand:"standing",jumping:"running",barking:"standing"};this.action in s&&(this.action=s[this.action])}let h=t.x[i];h=540-h-90,s.drawImage(this.huskyPng,h,t.y,90,58,this.xPos-this.width/2,this.yPos-this.height/1.5,this.width,this.height);for(let t=0,e=this.hp;t<e;t++)s.drawImage(this.heartPng,20*t+5,5,16,16);this.energy<0&&(this.energy=0),s.strokeText(`Energy: ${Math.floor(this.energy)}`,25*this.hp,16)}tick(s){this.move(),this.checkCollision(),this.frame=this.frame+1,this.draw(s),"walking"!==this.action&&this.velX>0&&this.velX<10?(this.frame=0,this.action="walking",this.speed=1):"walking"===this.action&&this.velX>9?(this.frame=0,this.action="running",this.speed=2):"walking"===this.action&&0===this.velX&&(this.frame=0,this.action="standing",this.speed=0)}}},function(s,t,e){const i=e(0);s.exports=class extends i{constructor(s,t){super(s,t),this.yPos=Math.floor(80*Math.random())+40,this.sprites.src="./assets/images/enemy_bat.png",this.enemyAnimation={width:32,height:32,delay:15,y:96,x:[0,32,64,96]}}move(){super.move(),!this.bound&&!this.dead&&0===this.stunCount&&this.yPos>75&&this.velY>-3&&(this.yPos>120?this.velY=-2:Math.random()>.8&&(this.velY=-2))}}},function(s,t,e){const i=e(0);s.exports=class extends i{constructor(s,t){super(s,t),this.sprites.src="./assets/images/enemy_skeleton.png",this.enemyAnimation={width:32,height:32,delay:15,y:32,x:[0,32,64]}}}},function(s,t){const e={x:[0,131,262,393,524],default:{delay:10,y:0},burst:{delay:10,y:131},explosion:{delay:5,y:262},swirl:{delay:10,y:393}};s.exports=class{constructor(s,t){this.game=s,this.husky=t,this.state="default",this.frame=0,this.xPos=135,this.yPos=70,this.velX=0,this.velY=0,this.lightPng=new Image,this.lightPng.src="./assets/images/magic.png",this.heldKeys={},this.heldEnemies=[]}pressKey(s){this.heldKeys[s]=!0,"ShiftLeft"===s&&this.husky.energy>4&&this.heldEnemies.length<6?(this.capture(),this.husky.energy-=5,this.frame=0,this.state="swirl"):"ShiftRight"===s&&this.heldEnemies.length>0&&(this.frame=0,this.state="default",this.heldEnemies.forEach(s=>{s.velX=2*this.velX,s.velY=2*this.velY,s.bound=!1,s.stunCount=30}),this.heldEnemies=[])}releaseKey(s){this.heldKeys[s]=!1}capture(){const s=this.game.enemies;for(let t=0,e=s.length;t<e;t++){const e=s[t];e.bound||Math.abs(this.xPos-e.xPos)<30&&Math.abs(this.yPos-e.yPos)<20&&(e.bound=!0,this.heldEnemies.push(e))}}move(){this.heldKeys.KeyJ&&this.velX>-5?this.velX-=1:this.heldKeys.KeyL&&this.velX<5?this.velX+=1:this.velX>0?this.velX-=.5:this.velX<0&&(this.velX+=.5),this.heldKeys.KeyI&&this.velY>-5?this.velY-=1:this.heldKeys.KeyK&&this.velY<5?this.velY+=1:this.velY>0?this.velY-=.5:this.velY<0&&(this.velY+=.5),this.xPos+=this.velX,this.yPos+=this.velY,this.xPos>=290?(this.xPos=290,this.velX=0):this.xPos<=10&&(this.xPos=10,this.velX=0),this.yPos>=130?(this.yPos=130,this.velY=0):this.yPos<=30&&(this.yPos=30,this.velY=0),this.heldEnemies.forEach(s=>{s.velX=this.velX,s.velY=this.velY})}tick(s){const t=e[this.state];let i=Math.floor(this.frame/t.delay);i===e.x.length?(this.frame=0,i=0,"swirl"===this.state&&(this.heldEnemies.length>0?this.state="burst":this.state="default")):this.frame=this.frame+1;const h=e.x[i||0];this.move(),s.drawImage(this.lightPng,h,t.y,150,150,this.xPos-24,this.yPos-24,48,48)}}}]);
//# sourceMappingURL=bundle.js.map